import { ANIMATION_DURATION } from '@/constants';
import { useEffect, useState } from 'react';
import './SplashScreen.css';

interface SplashScreenProps {
	onComplete?: () => void;
}

export default function SplashScreen({ onComplete }: SplashScreenProps) {
	const [isVisible, setIsVisible] = useState(true);
	const [shouldRender, setShouldRender] = useState(true);

	useEffect(() => {
		// Start fade out after the animation is complete
		const fadeOutTimer = setTimeout(() => {
			setIsVisible(false);
		}, ANIMATION_DURATION.splash);

		// Remove the splash screen from the DOM after fade out
		const removeTimer = setTimeout(() => {
			setShouldRender(false);
			onComplete?.();
		}, ANIMATION_DURATION.splash + 1000);

		return () => {
			clearTimeout(fadeOutTimer);
			clearTimeout(removeTimer);
		};
	}, [onComplete]);

	if (!shouldRender) {
		return null;
	}

	return (
		<div
			className={`fixed inset-0 z-100 flex items-center justify-center bg-white transition-opacity duration-1000 ${
				isVisible ? 'opacity-100' : 'opacity-0'
			}`}
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="118.745 60 221.8937 280"
				className="w-72 h-72 mx-auto"
			>
				{/* Calendar outline (draws first) */}
				<path
					className="calendar-outline"
					d="M 168.435 83.336 C 171.575 75.906 183.735 75.306 187.415 82.546 C 189.395 87.136 188.235 92.356 188.455 97.206 C 215.825 97.116 243.185 97.096 270.545 97.206 C 270.775 92.306 270.095 87.246 271.485 82.476 C 274.635 76.076 284.345 76.076 289.195 80.466 C 293.145 85.016 291.075 91.606 291.635 97.086 C 300.295 97.406 309.475 95.576 317.715 98.936 C 323.045 101.666 328.295 106.046 329.535 112.196 C 330.785 118.716 330.385 125.386 330.535 131.976 C 330.515 168.316 330.785 204.656 330.525 240.996 C 330.335 247.576 331.115 254.266 329.735 260.756 C 328.055 268.576 321.355 274.906 313.545 276.406 C 310.345 276.956 307.085 277.036 303.855 277.076 C 282.325 277.136 175.395 277.096 152.815 277.166 C 147.525 277.196 141.965 276.416 137.575 273.246 C 131.945 269.506 129.215 262.596 129.365 255.996 C 129.375 236.296 129.055 216.586 128.745 196.896 C 129.265 170.576 128.825 144.256 129.045 117.946 C 128.625 108.906 135.465 100.696 143.795 97.956 C 151.575 96.146 159.645 97.246 167.555 97.026 C 167.745 92.476 166.965 87.736 168.435 83.336 Z M 144.855 148.066 C 142.685 150.066 142.715 153.256 142.535 155.966 C 142.045 187.296 142.455 218.636 142.635 249.956 C 142.825 253.566 142.435 257.856 145.345 260.556 C 148.325 263.616 152.935 263.266 156.855 263.366 C 178.285 263.206 280.105 263.276 300.845 263.306 C 304.595 263.186 308.595 263.936 312.155 262.376 C 315.235 260.826 316.375 257.236 316.405 254.006 C 316.445 220.306 317.055 186.596 316.455 152.906 C 316.455 148.526 312.095 145.116 307.845 145.566 C 256.165 145.606 204.475 145.626 152.795 145.636 C 150.015 145.716 146.915 145.976 144.855 148.066 Z M 168.475 125.396 C 172.585 130.936 181.835 131.956 186.545 126.576 C 189.885 123.956 189.635 119.536 188.975 115.786 C 186.505 120.396 182.975 126.236 176.865 125.506 C 171.255 125.236 168.815 119.546 167.735 114.846 C 167.255 118.316 166.205 122.316 168.475 125.396 Z M 280.875 125.426 C 275.455 125.236 272.345 120.316 271.085 115.596 C 270.725 117.886 270.045 120.216 270.405 122.556 C 271.045 125.156 273.025 127.206 275.255 128.576 C 280.045 131.836 286.955 129.826 290.445 125.546 C 293.265 122.336 292.685 117.746 293.035 113.806 C 291.195 119.176 287.715 126.356 280.875 125.426 Z"
				/>

				{/* Calendar fill (fades in second) */}
				<path
					className="calendar-fill"
					d="M 168.435 83.336 C 171.575 75.906 183.735 75.306 187.415 82.546 C 189.395 87.136 188.235 92.356 188.455 97.206 C 215.825 97.116 243.185 97.096 270.545 97.206 C 270.775 92.306 270.095 87.246 271.485 82.476 C 274.635 76.076 284.345 76.076 289.195 80.466 C 293.145 85.016 291.075 91.606 291.635 97.086 C 300.295 97.406 309.475 95.576 317.715 98.936 C 323.045 101.666 328.295 106.046 329.535 112.196 C 330.785 118.716 330.385 125.386 330.535 131.976 C 330.515 168.316 330.785 204.656 330.525 240.996 C 330.335 247.576 331.115 254.266 329.735 260.756 C 328.055 268.576 321.355 274.906 313.545 276.406 C 310.345 276.956 307.085 277.036 303.855 277.076 C 282.325 277.136 175.395 277.096 152.815 277.166 C 147.525 277.196 141.965 276.416 137.575 273.246 C 131.945 269.506 129.215 262.596 129.365 255.996 C 129.375 236.296 129.055 216.586 128.745 196.896 C 129.265 170.576 128.825 144.256 129.045 117.946 C 128.625 108.906 135.465 100.696 143.795 97.956 C 151.575 96.146 159.645 97.246 167.555 97.026 C 167.745 92.476 166.965 87.736 168.435 83.336 Z M 144.855 148.066 C 142.685 150.066 142.715 153.256 142.535 155.966 C 142.045 187.296 142.455 218.636 142.635 249.956 C 142.825 253.566 142.435 257.856 145.345 260.556 C 148.325 263.616 152.935 263.266 156.855 263.366 C 178.285 263.206 280.105 263.276 300.845 263.306 C 304.595 263.186 308.595 263.936 312.155 262.376 C 315.235 260.826 316.375 257.236 316.405 254.006 C 316.445 220.306 317.055 186.596 316.455 152.906 C 316.455 148.526 312.095 145.116 307.845 145.566 C 256.165 145.606 204.475 145.626 152.795 145.636 C 150.015 145.716 146.915 145.976 144.855 148.066 Z M 168.475 125.396 C 172.585 130.936 181.835 131.956 186.545 126.576 C 189.885 123.956 189.635 119.536 188.975 115.786 C 186.505 120.396 182.975 126.236 176.865 125.506 C 171.255 125.236 168.815 119.546 167.735 114.846 C 167.255 118.316 166.205 122.316 168.475 125.396 Z M 280.875 125.426 C 275.455 125.236 272.345 120.316 271.085 115.596 C 270.725 117.886 270.045 120.216 270.405 122.556 C 271.045 125.156 273.025 127.206 275.255 128.576 C 280.045 131.836 286.955 129.826 290.445 125.546 C 293.265 122.336 292.685 117.746 293.035 113.806 C 291.195 119.176 287.715 126.356 280.875 125.426 Z"
				/>

				{/* Fork icon (on top) */}
				<g className="fork">
					<path d="M 222.621 267.991 C 223.42 242.706 238.529 245.352 239.546 268.862 C 239.736 273.249 240.812 299.986 240.202 304.356 C 239.582 308.116 235.902 310.806 232.152 310.586 C 228.432 311.006 223.722 309.756 222.472 305.786 C 221.282 300.986 222.701 272.881 222.621 267.991 Z M 239.892 277.186 C 239.892 297.819 222.034 298.576 222.392 276.986 C 222.062 270.936 222.712 264.856 222.062 258.826 C 221.692 254.726 218.362 251.826 215.272 249.546 C 209.512 245.596 202.862 241.976 199.802 235.336 C 195.092 225.426 197.462 214.276 198.472 203.856 C 199.912 194.216 199.352 184.436 200.052 174.756 C 200.952 170.216 206.912 172.216 209.732 173.756 C 210.912 187.476 209.752 201.256 210.382 214.976 C 210.152 217.246 212.232 218.336 213.752 219.536 C 214.512 219.176 216.032 218.466 216.792 218.106 C 218.552 209.136 217.572 199.916 217.872 190.836 C 218.162 184.966 217.182 178.906 218.582 173.166 C 220.882 171.266 225.132 171.426 226.842 174.086 C 227.802 176.546 227.542 179.266 227.622 181.846 C 227.432 192.206 227.352 202.556 227.412 212.916 C 227.502 214.766 227.422 216.786 228.512 218.396 C 230.112 218.836 231.852 218.896 233.422 218.276 C 234.712 216.796 234.692 214.746 234.772 212.896 C 234.892 199.776 234.482 186.646 234.612 173.516 C 236.082 172.846 237.552 172.146 239.102 171.666 C 240.872 171.766 242.402 172.786 244.002 173.456 C 244.192 185.586 244.172 197.716 244.182 209.846 C 244.252 212.256 244.092 214.736 244.792 217.086 C 245.702 219.316 248.702 218.676 250.552 218.186 C 252.422 216.756 251.792 213.956 252.142 211.906 C 252.192 199.096 252.272 186.286 252.222 173.486 C 255.122 171.696 258.502 171.956 261.742 172.386 C 262.722 181.866 262.222 191.426 263.322 200.896 C 264.072 209.816 266.302 218.816 264.592 227.756 C 263.642 233.596 260.602 239.036 256.182 242.966 C 251.872 247.166 245.932 249.266 241.902 253.766 C 240.052 255.626 239.912 258.386 239.832 260.856 C 239.712 266.296 239.892 271.736 239.892 277.186 Z" />
				</g>
			</svg>
		</div>
	);
}
